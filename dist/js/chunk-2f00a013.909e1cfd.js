(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f00a013"],{1148:function(t,a,o){"use strict";var e=o("a691"),r=o("1d80");t.exports="".repeat||function(t){var a=String(r(this)),o="",i=e(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(a+=a))1&i&&(o+=a);return o}},"1ae6":function(t,a,o){"use strict";o("8920")},"1dde":function(t,a,o){var e=o("d039"),r=o("b622"),i=o("2d00"),n=r("species");t.exports=function(t){return i>=51||!e((function(){var a=[],o=a.constructor={};return o[n]=function(){return{foo:1}},1!==a[t](Boolean).foo}))}},"25f0":function(t,a,o){"use strict";var e=o("6eeb"),r=o("825a"),i=o("d039"),n=o("ad6d"),s="toString",l=RegExp.prototype,c=l[s],u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=s;(u||d)&&e(RegExp.prototype,s,(function(){var t=r(this),a=String(t.source),o=t.flags,e=String(void 0===o&&t instanceof RegExp&&!("flags"in l)?n.call(t):o);return"/"+a+"/"+e}),{unsafe:!0})},"408a":function(t,a,o){var e=o("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=e(t))throw TypeError("Incorrect invocation");return+t}},8418:function(t,a,o){"use strict";var e=o("c04e"),r=o("9bf2"),i=o("5c6c");t.exports=function(t,a,o){var n=e(a);n in t?r.f(t,n,i(0,o)):t[n]=o}},"857a":function(t,a,o){var e=o("1d80"),r=/"/g;t.exports=function(t,a,o,i){var n=String(e(t)),s="<"+a;return""!==o&&(s+=" "+o+'="'+String(i).replace(r,"&quot;")+'"'),s+">"+n+"</"+a+">"}},8920:function(t,a,o){},9911:function(t,a,o){"use strict";var e=o("23e7"),r=o("857a"),i=o("af03");e({target:"String",proto:!0,forced:i("link")},{link:function(t){return r(this,"a","href",t)}})},ad6d:function(t,a,o){"use strict";var e=o("825a");t.exports=function(){var t=e(this),a="";return t.global&&(a+="g"),t.ignoreCase&&(a+="i"),t.multiline&&(a+="m"),t.dotAll&&(a+="s"),t.unicode&&(a+="u"),t.sticky&&(a+="y"),a}},ae40:function(t,a,o){var e=o("83ab"),r=o("d039"),i=o("5135"),n=Object.defineProperty,s={},l=function(t){throw t};t.exports=function(t,a){if(i(s,t))return s[t];a||(a={});var o=[][t],c=!!i(a,"ACCESSORS")&&a.ACCESSORS,u=i(a,0)?a[0]:l,d=i(a,1)?a[1]:void 0;return s[t]=!!o&&!r((function(){if(c&&!e)return!0;var t={length:-1};c?n(t,1,{enumerable:!0,get:l}):t[1]=1,o.call(t,u,d)}))}},af03:function(t,a,o){var e=o("d039");t.exports=function(t){return e((function(){var a=""[t]('"');return a!==a.toLowerCase()||a.split('"').length>3}))}},b680:function(t,a,o){"use strict";var e=o("23e7"),r=o("a691"),i=o("408a"),n=o("1148"),s=o("d039"),l=1..toFixed,c=Math.floor,u=function(t,a,o){return 0===a?o:a%2===1?u(t,a-1,o*t):u(t*t,a/2,o)},d=function(t){var a=0,o=t;while(o>=4096)a+=12,o/=4096;while(o>=2)a+=1,o/=2;return a},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){l.call({})}));e({target:"Number",proto:!0,forced:f},{toFixed:function(t){var a,o,e,s,l=i(this),f=r(t),h=[0,0,0,0,0,0],v="",p="0",g=function(t,a){var o=-1,e=a;while(++o<6)e+=t*h[o],h[o]=e%1e7,e=c(e/1e7)},b=function(t){var a=6,o=0;while(--a>=0)o+=h[a],h[a]=c(o/t),o=o%t*1e7},_=function(){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==h[t]){var o=String(h[t]);a=""===a?o:a+n.call("0",7-o.length)+o}return a};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(v="-",l=-l),l>1e-21)if(a=d(l*u(2,69,1))-69,o=a<0?l*u(2,-a,1):l/u(2,a,1),o*=4503599627370496,a=52-a,a>0){g(0,o),e=f;while(e>=7)g(1e7,0),e-=7;g(u(10,e,1),0),e=a-1;while(e>=23)b(1<<23),e-=23;b(1<<e),g(1,1),b(2),p=_()}else g(0,o),g(1<<-a,0),p=_()+n.call("0",f);return f>0?(s=p.length,p=v+(s<=f?"0."+n.call("0",f-s)+p:p.slice(0,s-f)+"."+p.slice(s-f))):p=v+p,p}})},c84b:function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"detail"},[o("van-nav-bar",{attrs:{fixed:!0,title:"书籍详情","right-text":"书城","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack}}),o("div",{staticClass:"book-detail clearfix"},[o("img",{attrs:{src:t.bookDetail.cover,alt:""}}),o("div",{staticClass:"book-detail-word"},[o("h3",[t._v(t._s(t.bookDetail.title))]),o("div",{staticClass:"detail-ac"},[o("span",{staticClass:"book-author"},[t._v(t._s(t.bookDetail.author))]),o("span",{staticClass:"book-copyright"},[t._v(t._s(t.bookDetail.copyright))])]),o("div",{staticClass:"tw"},[o("span",{staticClass:"book-type"},[t._v(t._s(t.bookDetail.minorCate))]),o("span",{staticClass:"book-wordCount"},[t._v(t._s(t.bookDetail.wordCount))])])])]),o("ul",{staticClass:"reader-data"},[o("li",{staticClass:"score"},[o("p",[o("span",{staticClass:"star-score"},[t._v(t._s(t.readerData.score))]),o("van-rate",{attrs:{size:12,color:"#ffd21e","void-icon":"star","void-color":"#eee",gutter:0},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}})],1),o("p",{staticClass:"score-count"},[t._v(t._s(t.readerData.tip))])]),o("li",[o("p",[t._v(t._s(t.bookDetail.retentionRatio)+"%")]),o("p",[t._v("读者留存")])]),o("li",[o("p",[t._v(t._s(t.bookDetail.latelyFollower))]),o("p",[t._v("7日人气")])]),o("li",[o("p",[t._v(t._s(t.bookDetail.totalFollower))]),o("p",[t._v("累计人气")])])]),o("div",{staticClass:"describe-box"},[o("h3",[t._v("简介")]),t._l(t.bookDetail.tags,(function(a,e){return o("span",{key:e,staticClass:"span-classify"},[t._v(t._s(a))])})),o("p",{class:[t.isActive?"active":""]},[t._v(" "+t._s(t.bookDetail.longIntro)+" "),o("span",{staticClass:"arrow-down"},[o("van-icon",{attrs:{name:"arrow-down"},on:{click:function(a){return t.jian()}}})],1)])],2),o("div",{staticClass:"detail-catalog",on:{click:function(a){return t.goList()}}},[o("span",{staticClass:"catalogue"},[t._v("目录")]),o("span",[t._v("1天前更新")]),o("span",[t._v(t._s(t.bookDetail.lastChapter)+" "),o("van-icon",{attrs:{name:"arrow"}})],1)]),t._m(0),t._m(1),o("van-tabbar",{model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[o("van-tabbar-item",{attrs:{name:"zhui"},on:{click:t.addBookshelf}},[o("span",{staticClass:"add"},[t._v("+")]),t._v("加入书架")]),o("van-tabbar-item",{staticClass:"startRead",attrs:{name:"kai"},on:{click:function(a){return t.startRead()}}},[t._v("开始阅读")]),o("van-tabbar-item",{attrs:{name:"xia"}},[o("span",{staticClass:"jian"},[t._v("↓")]),t._v("下载")])],1)],1)},r=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"hot-short"},[o("h5",{staticClass:"hot-title"},[t._v("热门短评")]),o("ul",{staticClass:"hot-content"}),o("div",{staticClass:"all-ping"},[t._v("查看全部短评")])])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"hot-book"},[o("h5",{staticClass:"hot-title"},[t._v("热门书评")]),o("ul",{staticClass:"hot-content"}),o("div",{staticClass:"all-ping"},[t._v("全部书评")])])}],i=(o("fb6a"),o("b680"),o("d3b7"),o("25f0"),o("9911"),{data:function(){return{value:5,readerData:"",bookDetail:"",isActive:!1,active:"kai",shuYuanId:""}},created:function(){this.startDetail(),this.bookStart()},methods:{goBack:function(){this.$router.go(-1)},jian:function(){this.isActive=!this.isActive},startDetail:function(){var t=this,a=this.$route.query.bookId;this.axios({method:"GET",url:"/book-info/"+a}).then((function(a){if(200===a.status){a.data.rating.score=a.data.rating.score.toFixed(1),t.readerData=a.data.rating,a.data.cover="https://statics.zhuishushenqi.com"+a.data.cover,a.data.latelyFollower=a.data.latelyFollower.toString();var o=a.data.latelyFollower.length;o>4&&(a.data.latelyFollower=a.data.latelyFollower.slice(0,o-4)+"."+a.data.latelyFollower.substr(o-4,1)+"万"),a.data.totalFollower=a.data.totalFollower.toString();var e=a.data.totalFollower.length;e>4&&(a.data.totalFollower=a.data.totalFollower.slice(0,e-4)+"."+a.data.totalFollower.substr(e-4,1)+"万"),a.data.wordCount=a.data.wordCount.toString();var r=a.data.wordCount.length;r>4&&(a.data.wordCount=a.data.wordCount.slice(0,r-4)+"万"),t.bookDetail=a.data}})).catch((function(a){t.$toast.clear()}))},bookStart:function(){var t=this,a=this.$route.query.bookId;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"/book-sources",params:{view:"summary",book:a}}).then((function(a){t.$toast.clear(),t.shuYuanId=a.data[0]._id})).catch((function(a){t.$toast.clear()}))},goList:function(){var t=this.shuYuanId;this.$router.push({name:"CatalogList",query:{shuYuanId:t,bookName:this.bookDetail.title}})},addBookshelf:function(){var t=this.bookDetail,a=t.cover,o=t.title,e=t.author,r=t.majorCate,i=t.longIntro,n=t.wordCount,s=t.retentionRatio,l=0,c=0;localStorage.getItem("read_chapter_"+this.shuYuanId)&&(l=localStorage.getItem("read_chapter_"+this.shuYuanId));var u={shuYuanId:this.shuYuanId,chapterIndex:l,pageNum:c,cover:a,title:o,author:e,majorCate:r,longIntro:i,wordCount:n,retentionRatio:s},d=[];localStorage.getItem("weibooks")&&(d=JSON.parse(localStorage.getItem("weibooks")));for(var f=0;f<d.length;f++)if(d[f].shuYuanId==u.shuYuanId)return void this.$toast("该书已在书架");d.push(u),localStorage.setItem("weibooks",JSON.stringify(d)),this.$toast("加入书架成功")},startRead:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var a=this.bookDetail.title;localStorage.getItem("read_chapter_"+this.shuYuanId)||localStorage.setItem("read_chapter_"+this.shuYuanId,0);var o=localStorage.getItem("read_chapter_"+this.shuYuanId);this.axios({method:"GET",url:"/book-chapters/"+this.shuYuanId}).then((function(e){t.$toast.clear();var r=t.shuYuanId,i=e.data.chapters[o].link;t.$router.push({name:"Reader",query:{link:i,shuYuanId:r,index:o,title:a}})})).catch((function(a){t.$toast.clear()}))}}}),n=i,s=(o("1ae6"),o("2877")),l=Object(s["a"])(n,e,r,!1,null,"ad1f91a4",null);a["default"]=l.exports},e8b5:function(t,a,o){var e=o("c6b6");t.exports=Array.isArray||function(t){return"Array"==e(t)}},fb6a:function(t,a,o){"use strict";var e=o("23e7"),r=o("861d"),i=o("e8b5"),n=o("23cb"),s=o("50c4"),l=o("fc6a"),c=o("8418"),u=o("b622"),d=o("1dde"),f=o("ae40"),h=d("slice"),v=f("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),g=[].slice,b=Math.max;e({target:"Array",proto:!0,forced:!h||!v},{slice:function(t,a){var o,e,u,d=l(this),f=s(d.length),h=n(t,f),v=n(void 0===a?f:a,f);if(i(d)&&(o=d.constructor,"function"!=typeof o||o!==Array&&!i(o.prototype)?r(o)&&(o=o[p],null===o&&(o=void 0)):o=void 0,o===Array||void 0===o))return g.call(d,h,v);for(e=new(void 0===o?Array:o)(b(v-h,0)),u=0;h<v;h++,u++)h in d&&c(e,u,d[h]);return e.length=u,e}})}}]);
//# sourceMappingURL=chunk-2f00a013.909e1cfd.js.map